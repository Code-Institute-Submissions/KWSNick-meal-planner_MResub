{% extends "base.html" %}
{% block content %}
<div class="row">
    <div class="col s12 center">
        <h1>Weekly Menus</h1>
    </div>
</div>
<div class="row">
    <ul class="collapsible">
        <li>
            <div id="create_menu_btn" class="collapsible-header center-align">
                <button id="new_menu" type="button" class="hoverable btn-floating btn-small waves-effect waves-light red">
                    <i class="fas fa-plus"></i>
                </button>
                    <span>
                        <h5 id="create_menu_header">Create a new menu</h5>
                    </span>
            </div>
            <div class="collapsible-body">
                <form method="POST" action="{{ url_for('weekly_menus') }}">
                    <div class="input-field col s4">
                        <!--Enters the current year as the default option-->
                        <input class="center" id="year_select" name="year_select" type="number" value="{{ year }}" required>
                        <label for="ingredient_quantity1">Year</label>
                    </div>
                    <div class="input-field col s4">
                        <!--Sets the current month as the default option-->
                        {% set month_id = month %}
                        <select class="center" id="month_select" name="month_select" required>
                            <option value="{{ month }}" selected>This Month: {{ month_name }}</option>
                            <option value="1">January {% set month_id = 1 %}</option>
                            <option value="2">February</option>
                            <option value="3">March</option>
                            <option value="4">April</option>
                            <option value="5">May</option>
                            <option value="6">June</option>
                            <option value="7">July</option>
                            <option value="8">August</option>
                            <option value="9">September</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                        </select>
                        <label for="month_select">Month</label>
                    </div>
                    <div class="col s4">
                        <!--When this button is pressed the year and month is sent to the routing method and if the week_select has no valid week selected
                        then it refreshes the page but has obtained weeks to select.-->
                        <button id="get_weeks_btn" class="col s12 waves-effect waves-light btn-large amber darken-1" type="submit">Choose Week</button>
                    </div>
                    <div class="row">
                        <div class="input-field center col s6">
                            {% set i = namespace(value=0) %}
                            <select class="center" id="week_select" name="week_select" required>
                                <option value="no weeks" selected>Weeks</option>
                                {% for week in cal %}
                                    {% if week.0 == 0 %}
                                        
                                    {% else %}
                                    <option value="{{ i.value }}">
                                        Week Commencing: 
                                            {% if week.0 == 1 %}
                                                {{ week.0 }}st, 
                                            {% elif week.0 == 2 %}
                                                {{ day }}nd, 
                                            {% elif week.0 == 3 %}
                                                {{ week.0 }}rd, 
                                            {% else %}
                                                {{ week.0 }}th, 
                                            {% endif %}
                                        </option>
                                    {% endif %}
                                    {% set i.value = i.value + 1 %}
                                {% endfor %}
                            </select>
                            <label for="week_select">Week</label>
                        </div>
                    </div>
                </form>
            </div>
        </li>
        <li>
            <div class="collapsible-header"><i class="material-icons">place</i>Second</div>
            <div class="collapsible-body"><span>Lorem ipsum dolor sit amet.</span></div>
        </li>
        <li>
            <div class="collapsible-header"><i class="material-icons">whatshot</i>Third</div>
            <div class="collapsible-body"><span>Lorem ipsum dolor sit amet.</span></div>
        </li>
    </ul>
</div>
{% endblock %}